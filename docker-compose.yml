version: "3.9"

services:
  app:
    build: .
    image: multi-agent:latest
    ports:
      - "3001:3000"  # host:container (use 3000 if free)
      - "8001:8000"  # host:container (use 8000 if free)
    # Optional env vars; override via shell exports or a local .env
    environment:
      NEXT_PUBLIC_API_BASE: "${NEXT_PUBLIC_API_BASE:-http://localhost:8000}"
      OPENAI_API_KEY: "${OPENAI_API_KEY:-}"
      LANGSMITH_TRACING: "${LANGSMITH_TRACING:-true}"
      LANGSMITH_API_KEY: "${LANGSMITH_API_KEY:-}"
      LANGSMITH_PROJECT: "${LANGSMITH_PROJECT:-multi-agent}"
      LANGSMITH_HUB_OWNER: "${LANGSMITH_HUB_OWNER:-}"
    restart: unless-stopped
